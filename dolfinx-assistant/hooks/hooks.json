{
  "PreToolUse": [
    {
      "matcher": "DOLFINx_FEM_Solver__solve|DOLFINx_FEM_Solver__solve_nonlinear|DOLFINx_FEM_Solver__solve_time_dependent",
      "hooks": [
        {
          "type": "prompt",
          "prompt": "Before this solve executes, verify the simulation setup is complete and reasonable:\n\n1. MESH: Is there an active mesh? Has mesh quality been checked or at least acknowledged?\n2. FUNCTION SPACE: Is a function space defined on the active mesh?\n3. BOUNDARY CONDITIONS: Are BCs defined? A problem with no BCs is usually an error.\n4. VARIATIONAL FORM: Are bilinear and linear forms defined?\n5. EXPRESSION SAFETY: Check that any UFL expressions in the tool input do not contain dangerous tokens (import, __, exec, eval, open, os., sys., subprocess).\n\nIf any critical issue is found (no mesh, no space, no form, dangerous expression), respond with 'BLOCK: <reason>'. Otherwise respond with 'ALLOW'.",
          "timeout": 15
        }
      ]
    }
  ],
  "SessionStart": [
    {
      "matcher": "",
      "hooks": [
        {
          "type": "prompt",
          "prompt": "A DOLFINx FEM simulation session is starting. Briefly remind the user of available commands:\n- /sim-setup — guided simulation configuration\n- /solve-pde — end-to-end PDE solve\n- /check-mesh — mesh quality audit\n- /run-convergence — convergence study\n- /sim-report — generate simulation report\n- /compare-solutions — compare two solutions\n- /export-results — export to VTK/XDMF\n- /tutorial — interactive tutorial walkthrough\n\nKeep it to 2-3 sentences. Don't list every command — just mention that commands are available and suggest /sim-setup or /solve-pde as starting points.",
          "timeout": 10
        }
      ]
    }
  ]
}
